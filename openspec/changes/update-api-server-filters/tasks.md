# Tasks
- [x] 1. Introduce a `StarQuery` module in `src/db.rs` (or a sibling) that composes SQL for search, language, activity tier, user pin/exclude, sort, pagination, totals, and immutable etag fingerprints; back it with unit tests covering each filter permutation.
- [x] 2. Extend `/api/stars` handler to call the new query layer instead of `recent_events_for_feed`, returning filtered items plus populated `meta` (`page`, `page_size`, `total`, `has_next`, `has_prev`, `etag`, `last_modified`), and add warp integration tests for default, filtered, and empty responses including `304` behaviour.
- [x] 3. Implement `/api/options` aggregation queries for languages, activity tiers, and user counts (respecting current data filters such as recent activity), ensure deterministic ordering, and cover the endpoint with tests plus conditional caching assertions.
- [x] 4. Populate `/api/status` with scheduler telemetry (last poll start/finish, stale flag, per-tier `next_check_at`, rate-limit remaining/reset, last error) by wiring into existing pipeline bookkeeping, and add tests that drive both fresh and stale cases.
- [x] 5. Update HTML/RSS builders or loaders to rely on the shared query module (instead of bespoke `feed_length` slices) so `/` and `/feed.xml` keep consistent ordering while `/api/stars` serves arbitrary windows; verify with snapshot or integration tests.
- [x] 6. Document the API contract in README/specs and run `cargo fmt`, `cargo clippy --all-targets -- -D warnings`, `cargo test`, plus `openspec validate update-api-server-filters --strict` to finish the change.
